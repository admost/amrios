!function(){function e(e){o.d("isCloseRegionOnScreen"),o.d("defaultPosition "+C.x+" "+C.y),o.d("offset "+e.offsetX+" "+e.offsetY);var t={};t.x=C.x+e.offsetX,t.y=C.y+e.offsetY,t.width=e.width,t.height=e.height,r("resizeRect",t);var n=e.hasOwnProperty("customClosePosition")?e.customClosePosition:w.customClosePosition;o.d("customClosePosition "+n);var a={width:50,height:50};-1!==n.search("left")?a.x=t.x:-1!==n.search("center")?a.x=t.x+t.width/2-25:-1!==n.search("right")&&(a.x=t.x+t.width-50),-1!==n.search("top")?a.y=t.y:"center"===n?a.y=t.y+t.height/2-25:-1!==n.search("bottom")&&(a.y=t.y+t.height-50);var s={x:0,y:0};return s.width=y.width,s.height=y.height,i(s,a)}function t(e){o.d("fitResizeViewOnScreen"),o.d("defaultPosition "+C.x+" "+C.y),o.d("offset "+e.offsetX+" "+e.offsetY);var t={};t.x=C.x+e.offsetX,t.y=C.y+e.offsetY,t.width=e.width,t.height=e.height,r("resizeRect",t);var n={x:0,y:0};n.width=y.width,n.height=y.height;var a={x:0,y:0};return i(n,t)?(o.d("no adjustment necessary"),a):(t.x<n.x?a.x=n.x-t.x:t.x+t.width>n.x+n.width&&(a.x=n.x+n.width-(t.x+t.width)),o.d("adjustments.x "+a.x),t.y<n.y?a.y=n.y-t.y:t.y+t.height>n.y+n.height&&(a.y=n.y+n.height-(t.y+t.height)),o.d("adjustments.y "+a.y),t.x=C.x+e.offsetX+a.x,t.y=C.y+e.offsetY+a.y,r("adjusted resizeRect",t),a)}function i(e,t){return o.d("isRectContained"),r("containingRect",e),r("containedRect",t),t.x>=e.x&&t.x+t.width<=e.x+e.width&&t.y>=e.y&&t.y+t.height<=e.y+e.height}function r(e,t){o.d(e+" ["+t.x+","+t.y+"],["+(t.x+t.width)+","+(t.y+t.height)+"] ("+t.width+"x"+t.height+")")}LogLevelEnum={DEBUG:0,INFO:1,WARNING:2,ERROR:3};var n=LogLevelEnum.DEBUG,o={};o.d=function(e){n<=LogLevelEnum.DEBUG&&console.log("(D) "+e)},o.i=function(e){n<=LogLevelEnum.INFO&&console.log("(I) "+e)},o.w=function(e){n<=LogLevelEnum.WARN&&console.log("(W) "+e)},o.e=function(e){console.log("(E) "+e)};var a=window.mraid={},s="2.0",f=a.STATES={LOADING:"loading",DEFAULT:"default",EXPANDED:"expanded",RESIZED:"resized",HIDDEN:"hidden"},d=a.PLACEMENT_TYPES={INLINE:"inline",INTERSTITIAL:"interstitial"},h=a.RESIZE_PROPERTIES_CUSTOM_CLOSE_POSITION={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",CENTER:"center",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"},u=a.ORIENTATION_PROPERTIES_FORCE_ORIENTATION={PORTRAIT:"portrait",LANDSCAPE:"landscape",NONE:"none"},l=a.EVENTS={ERROR:"error",READY:"ready",SIZECHANGE:"sizeChange",STATECHANGE:"stateChange",VIEWABLECHANGE:"viewableChange"},c=(a.SUPPORTED_FEATURES={SMS:"sms",TEL:"tel",CALENDAR:"calendar",STOREPICTURE:"storePicture",INLINEVIDEO:"inlineVideo"},f.LOADING),E=d.INLINE,g={},v=!1,p=!1,m={width:0,height:0,useCustomClose:!1,isModal:!0},O={allowOrientationChange:!0,forceOrientation:u.NONE},w={width:0,height:0,customClosePosition:h.TOP_RIGHT,offsetX:0,offsetY:0,allowOffscreen:!0},P={x:0,y:0,width:0,height:0},C={x:0,y:0,width:0,height:0},y={width:0,height:0},S={width:0,height:0},N={};a.addEventListener=function(e,t){if(o.i("mraid.addEventListener "+e+": "+String(t)),!e||!t)return void a.fireErrorEvent("Both event and listener are required.","addEventListener");if(!T(e,l))return void a.fireErrorEvent("Unknown MRAID event: "+e,"addEventListener");for(var i=N[e]=N[e]||[],r=0;r<i.length;r++){var n=String(t),s=String(i[r]);if(t===i[r]||n===s)return void o.i("listener "+n+" is already registered for event "+e)}i.push(t)},a.createCalendarEvent=function(e){o.i("mraid.createCalendarEvent with "+e),x("createCalendarEvent?eventJSON="+JSON.stringify(e))},a.close=function(){o.i("mraid.close"),x("close")},a.expand=function(e){void 0===e?o.i("mraid.expand (1-part)"):o.i("mraid.expand "+e),E!==d.INLINE||c!==f.DEFAULT&&c!==STAES.RESIZED||x(void 0===e?"expand":"expand?url="+encodeURIComponent(e))},a.getCurrentPosition=function(){return o.i("mraid.getCurrentPosition"),P},a.getDefaultPosition=function(){return o.i("mraid.getDefaultPosition"),C},a.getExpandProperties=function(){return o.i("mraid.getExpandProperties"),m},a.getStringExpandProperties=function(){return o.i("mraid.getStringExpandProperties"),JSON.stringify(m)},a.getMaxSize=function(){return o.i("mraid.getMaxSize "+y.width+" x "+y.height),y},a.getStringOrientationProperties=function(){return o.i("mraid.getOrientationProperties"),JSON.stringify(O)},a.getOrientationProperties=function(){return o.i("mraid.getOrientationProperties"),O},a.getPlacementType=function(){return o.i("mraid.getPlacementType"),E},a.getStringResizeProperties=function(){return o.i("mraid.getOrientationProperties"),JSON.stringify(w)},a.getResizeProperties=function(){return o.i("mraid.getResizeProperties"),w},a.getScreenSize=function(){return o.i("mraid.getScreenSize"),S},a.getState=function(){return o.i("mraid.getState"),c},a.getVersion=function(){return o.i("mraid.getVersion"),s},a.isViewable=function(){return o.i("mraid.isViewable"),v},a.open=function(e){o.i("mraid.open "+e),x("open?url="+encodeURIComponent(e))},a.playVideo=function(e){o.i("mraid.playVideo "+e),x("playVideo?url="+encodeURIComponent(e))},a.removeEventListener=function(e,t){if(o.i("mraid.removeEventListener "+e+" : "+String(t)),!e)return void a.fireErrorEvent("Event is required.","removeEventListener");if(!T(e,l))return void a.fireErrorEvent("Unknown MRAID event: "+e,"removeEventListener");if(N.hasOwnProperty(e))if(t){for(var i=N[e],r=i.length,n=0;r>n;n++){var s=i[n],f=String(t),d=String(s);if(t===s||f===d){i.splice(n,1);break}}n===r&&o.i("listener "+f+" not found for event "+e),0===i.length&&delete N[e]}else delete N[e];else o.i("no listeners registered for event "+e)},a.resize=function(){return o.i("mraid.resize"),E!==d.INTERSTITIAL&&c!==f.LOADING&&c!==f.HIDDEN?c===f.EXPANDED?void a.fireErrorEvent("mraid.resize called when ad is in expanded state","mraid.resize"):p?void x("resize"):void a.fireErrorEvent("mraid.resize is not ready to be called","mraid.resize"):void 0},a.setExpandProperties=function(e){if(o.i("mraid.setExpandProperties "+e),!I(e,"setExpandProperties"))return void o.e("failed validation");for(var t=(m.useCustomClose,["width","height","useCustomClose"]),i=0;i<t.length;i++){var r=t[i];e.hasOwnProperty(r)&&(m[r]=e[r])}},a.setOrientationProperties=function(e){if(o.i("mraid.setOrientationProperties"),!I(e,"setOrientationProperties"))return void o.e("failed validation");var t={};t.allowOrientationChange=O.allowOrientationChange,t.forceOrientation=O.forceOrientation;for(var i=["allowOrientationChange","forceOrientation"],r=0;r<i.length;r++){var n=i[r];e.hasOwnProperty(n)&&(t[n]=e[n])}if(t.allowOrientationChange&&t.forceOrientation!==a.ORIENTATION_PROPERTIES_FORCE_ORIENTATION.NONE)return void a.fireErrorEvent("allowOrientationChange is true but forceOrientation is "+t.forceOrientation,"setOrientationProperties");O.allowOrientationChange=t.allowOrientationChange,O.forceOrientation=t.forceOrientation;var s="allowOrientationChange="+O.allowOrientationChange+"&forceOrientation="+O.forceOrientation;x("setOrientationProperties?"+s)},a.setResizeProperties=function(i){o.i("mraid.setResizeProperties"),p=!1;for(var r=["width","height","offsetX","offsetY"],n=0;n<r.length;n++){var s=r[n];if(!i.hasOwnProperty(s))return void a.fireErrorEvent("required property "+s+" is missing","mraid.setResizeProperties")}if(!I(i,"setResizeProperties"))return void a.fireErrorEvent("failed validation","mraid.setResizeProperties");var f={x:0,y:0},d=i.hasOwnProperty("allowOffscreen")?i.allowOffscreen:w.allowOffscreen;if(d){if(!e(i))return void a.fireErrorEvent("close event region will not appear entirely onscreen","mraid.setResizeProperties")}else{if(i.width>y.width||i.height>y.height)return void a.fireErrorEvent("resize width or height is greater than the maxSize width or height","mraid.setResizeProperties");f=t(i)}for(var h=["width","height","offsetX","offsetY","customClosePosition","allowOffscreen"],n=0;n<h.length;n++){var s=h[n];i.hasOwnProperty(s)&&(w[s]=i[s])}var u="width="+w.width+"&height="+w.height+"&offsetX="+(w.offsetX+f.x)+"&offsetY="+(w.offsetY+f.y)+"&customClosePosition="+w.customClosePosition+"&allowOffscreen="+w.allowOffscreen;x("setResizeProperties?"+u),p=!0},a.storePicture=function(e){o.i("mraid.storePicture "+e),x("storePicture?url="+encodeURIComponent(e))},a.supports=function(e){o.i("mraid.supports "+e+" "+g[e]);var t=g[e];return"undefined"==typeof t&&(t=!1),t},a.useCustomClose=function(e){o.i("mraid.useCustomClose "+e),m.useCustomClose!==e&&x("useCustomClose?useCustomClose="+e)},a.setCurrentPosition=function(e,t,i,r){o.i("mraid.setCurrentPosition "+e+","+t+","+i+","+r);var n={};n.width=P.width,n.height=P.height,o.i("previousSize "+n.width+","+n.height),P.x=e,P.y=t,P.width=i,P.height=r,(i!==n.width||r!==n.height)&&a.fireSizeChangeEvent(i,r)},a.setDefaultPosition=function(e,t,i,r){o.i("mraid.setDefaultPosition "+e+","+t+","+i+","+r),C.x=e,C.y=t,C.width=i,C.height=r},a.setExpandSize=function(e,t){o.i("mraid.setExpandSize "+e+"x"+t),m.width=e,m.height=t},a.setMaxSize=function(e,t){o.i("mraid.setMaxSize "+e+"x"+t),y.width=e,y.height=t},a.setPlacementType=function(e){o.i("mraid.setPlacementType "+e),E=e},a.setScreenSize=function(e,t){o.i("mraid.setScreenSize "+e+"x"+t),S.width=e,S.height=t},a.setSupports=function(e,t){o.i("mraid.setSupports "+e+" "+t),g[e]=t},a.fireErrorEvent=function(e,t){o.i("mraid.fireErrorEvent "+e+" "+t),R(a.EVENTS.ERROR,e,t)},a.fireReadyEvent=function(){o.i("mraid.fireReadyEvent"),R(a.EVENTS.READY)},a.fireSizeChangeEvent=function(e,t){o.i("mraid.fireSizeChangeEvent "+e+"x"+t),R(a.EVENTS.SIZECHANGE,e,t)},a.fireStateChangeEvent=function(e){o.i("mraid.fireStateChangeEvent "+e),c!==e&&(c=e,R(a.EVENTS.STATECHANGE,c))},a.fireViewableChangeEvent=function(e){o.i("mraid.fireViewableChangeEvent "+e),v!==e&&(v=e,R(a.EVENTS.VIEWABLECHANGE,v))},a.getStateString=function(){return c};var x=function(e){var t=document.createElement("IFRAME");t.setAttribute("src","mraid://"+e),document.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null},R=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),o.i("fireEvent "+e+" ["+t.toString()+"]");var i={};if(N[e]&&N[e].length)for(var r=0;r<N[e].length;r++){var n="i"+r;i[n]=N[e][r]}for(var n in i)i[n].apply(null,t)},T=function(e,t){for(var i in t)if(t[i]===e)return!0;return!1},I=function(e,t){var i=!0,r=z[t];for(var n in e){var o=r[n],s=e[n];o&&!o(s)&&(a.fireErrorEvent("Value of property "+n+" ("+s+") is invalid","mraid."+t),i=!1)}return i},z={setExpandProperties:{width:function(e){return!isNaN(e)},height:function(e){return!isNaN(e)},useCustomClose:function(e){return"boolean"==typeof e}},setOrientationProperties:{allowOrientationChange:function(e){return"boolean"==typeof e},forceOrientation:function(e){var t=["portrait","landscape","none"];return-1!==t.indexOf(e)}},setResizeProperties:{width:function(e){return!isNaN(e)&&e>=50},height:function(e){return!isNaN(e)&&e>=50},offsetX:function(e){return!isNaN(e)},offsetY:function(e){return!isNaN(e)},customClosePosition:function(e){var t=["top-left","top-center","top-right","center","bottom-left","bottom-center","bottom-right"];return-1!==t.indexOf(e)},allowOffscreen:function(e){return"boolean"==typeof e}}};a.dumpListeners=function(){var e=Object.keys(N).length;o.i("dumping listeners ("+e+" events)");for(var t in N){var i=N[t];o.i("  "+t+" contains "+i.length+" listeners");for(var r=0;r<i.length;r++)o.i("    "+i[r])}}}();