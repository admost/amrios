<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">

    <title>AMR - iOS Integration</title>

    <!-- Styles -->
    <link href="assets/css/theDocs.all.min.css" rel="stylesheet">
    <link href="assets/css/custom.css" rel="stylesheet">
    <link href="assets/css/skin/skin-red.css" rel="stylesheet">


    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Raleway:100,300,400,500%7CLato:300,400' rel='stylesheet'
          type='text/css'>

    <!-- Scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

    <!-- Favicons -->
    <link rel="icon" href="https://dashboard.admost.com/Assets/img/admostfavicon.png">
</head>

<body data-spy="scroll" data-target=".sidebar" data-offset="200">

<header class="site-header navbar-transparent sticky">

    <nav class="navbar navbar-default">
        <div class="container">

            <!-- Toggle buttons and brand -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar"
                        aria-expanded="true" aria-controls="navbar">
                    <span class="glyphicon glyphicon-option-vertical"></span>
                </button>

                <button type="button" class="navbar-toggle for-sidebar" data-toggle="offcanvas">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://admost.github.io"><img src="assets/img/logo-white.svg" alt="logo"></a>

            </div>
            <!-- END Toggle buttons and brand -->

            <!-- Top navbar -->
            <div id="navbar" class="navbar-collapse collapse" aria-expanded="true" role="banner">
                <ul class="nav navbar-nav navbar-right">
                    <li class="active"><a href="index.html">Documentation</a></li>
                    <li><a href="gdpr.html">GDPR</a></li>
                    <li><a href="release-notes.html">Release Notes</a></li>
                    <li><a href="faq.html">FAQ</a></li>
                    <li>
                        <a target="_blank" href="http://download.admost.com/AMRDemo.zip">
                        <i class="fa fa-mobile-phone"></i>&nbsp;&nbsp;Demo Project</a>
                    </li>
                </ul>
            </div>
            <!-- END Top navbar -->
        </div>
    </nav>
    <!-- END Top navbar & branding -->

    <!-- Banner -->
    <div class="banner auto-size" style="background-color: #f96868">
            <div class="container text-white">
                <h1><i class="fa fa-apple"></i>&nbsp; &nbsp;iOS Integration Guide</h1>
                <h5>This is the easiest way to implement AMR iOS SDK and ad networks to your current iOS Mobile
                    App.</h5>
            </div>
        </div>
        <!-- END Banner -->
</header>


<main class="container">
    <div class="row">
        <!-- Sidebar -->
        <aside class="col-sm-3 sidebar">
            <ul class="nav sidenav dropable sticky">
                <li><a href="#prerequisites">Prerequisites</a></li>
                <li>
                    <a href="#setup">Setup</a>
                    <ul>
                        <li>
                            <a href="#installation-with-cocoapods">Installation With CocoaPods</a>
                            <ul style="display: block;">
                                <li><a href="#create-your-podfile-and-install">Create your podfile and install</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#manual-installation" >Manual Installation</a>
                            <ul style="display: block;">
                                <li><a href="#amr-framework-files">AMR Framework Files</a></li>
                                <li><a href="#other-frameworks-and-libraries">Other Frameworks and Libraries</a></li>
                                <li><a href="#mediation-adapters">Mediation Adapters</a></li>
                            </ul>
                        </li>
                        <li><a href="#xcode-setup">Xcode Setup</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#usage">Usage</a>
                    <ul>
                        <li><a href="#initialization">Initialization</a></li>
                            <ul style="display: block;">
                                <li><a href="#initgdpr">GDPR</a></li>
                            </ul>
                        <li><a href="#banner-ads">Banner Ads</a></li>
                        <li><a href="#native-ads">Customize Native Ad Appearance (Optional)</a></li>
                        <li><a href="#interstitial-ads">Interstitial Ads</a></li>
                        <li><a href="#rewarded-video-ads">Rewarded Video Ads</a></li>
                        <li><a href="#offerwall-ads">Offerwall Ads</a></li>
                            <ul style="display: block;">
                                <li><a href="#spend-virtual-currency">Spend Virtual Currency</a></li>
                            </ul>
                    </ul>
                </li>
                <li><a href="#extras">Extras</a>
                    <ul>
                        <li><a href="#dfp">DFP/AdMob Mediation Integration</a></li>
                        <li><a href="#testsuite">Test Suite</a></li>
                        <li><a href="#iap">In App Purchase Tracking</a></li>
                        <li><a href="#bannercache">Preloading Banners</a></li>
                        <li><a href="#senduserid">Setting Application User Id</a></li>
                        <li><a href="#sendadjustuserid">Setting Adjust User Id</a></li>
                        <li><a href="#adjustintegration">Adjust Integration <span class="label label-teal">New</span></a></li>
						<li><a href="#sscallbacks">Server to Server Callbacks</a></li>
                    </ul>
                </li>
            </ul>

        </aside>
        <!-- END Sidebar -->

        <!-- Main content -->
        <article class="col-sm-9 main-content" role="main">
            <section>
                <h2 id="prerequisites">Prerequisites</h2>
                <ul>
                    <li>iOS 8 or later.</li>
                    <li> Xcode 10.2.1 or later.</li>
                    <li>Application Id provided in Admost Mediation Dashboard.</li>
                    <li>Zone Id(s) provided in Admost Mediation Dashboard.</li>
                </ul>

                <p>For testing you can use following Ids;</p>

                <pre><code class="language-markup">
Application Id: @"15066ddc-9c18-492c-8185-bea7e4c7f88c"
Banner Zone Id: @"b4009772-de04-42c4-bbaa-c18da9e4a1ab"
Interstitial Zone Id: @"39f74377-5682-436a-9338-9d1c4df410bd"
RewardedVideo Zone Id: @"2bdefd44-5269-4cbc-b93a-373b74a2f067"
Offerwall Zone Id: @"1cadca08-33f9-4da7-969e-ef116d4e7d0e"
                </code></pre>
            </section>
            <section>
                <h2 id="setup">Setup</h2>
                <p>You can install AMR SDK and mediation adapters using CocoaPods (recommended) or add AMR SDK framework
                    files and mediation adapters files manually to your project.</p>
                <h3 id="installation-with-cocoapods">Installation With CocoaPods</h3>

                <img src="https://cocoapod-badges.herokuapp.com/v/AMRSDK/badge.png" alt="pod version">&nbsp;&nbsp;
                <img src="https://cocoapod-badges.herokuapp.com/p/AMRSDK/badge.png" alt="pod platform">&nbsp;&nbsp;
                <img src="https://cocoapod-badges.herokuapp.com/l/AMRSDK/badge.png" alt="pod license">&nbsp;&nbsp;

                <br/><br/>
                <p><a href="https://cocoapods.org" target="_blank">CocoaPods</a> is a dependency manager for Swift and
                    Objective-C Cocoa projects which automates and simplifies the process of using 3rd-party libraries
                    like AMR in your projects. See <a href="https://guides.cocoapods.org/using/getting-started.html"
                                                      target="_blank">getting started guide</a> for more information on
                    installing cocoapods.</p>
                <h4 id="create-your-podfile-and-install">Create your podfile and install</h4>
                <p>
                    At least one mediation adapter is required for AMRSDK to show banners. You can add all adapters
                    (recommended for maximized revenue) or start with a subset of adapters. Consult your AMR agent for
                    further details.
                </p>

                <p>Please click <code>+</code> icon to add to list and <code>-</code> to remove from list.
                    <code>Podfile</code> will be updated while you are choosing networks. </p>
                <div class="row" id="adnetwork-button-list">
                </div>

                <p>To integrate AMR SDK and mediation adapters into your Xcode project using CocoaPods, specify it in
                    your <code>Podfile:</code></p>

                <pre><code id="file-pod">

                </code></pre>

                <p>Then, run the following command:</p>

                <pre><code class="language-markup">$ pod install</code></pre>

                <p>After you complete pod installation you can skip to <a href="#xcode-setup">Xcode Setup</a> step.</p>


                <h3 id="manual-installation">Manual Installation</h3>

                <p>Make sure <code>$(PROJECT_DIR) recursive </code> is set in your target's <kbd>Framework Search
                        Paths</kbd> in <kbd>Build Settings</kbd>.</p>
                <p> Add <code>-ObjC</code> and <code>-lc++</code> flags in your target's <kbd>Other Linker Flags</kbd>
                    in <kbd>Build Settings</kbd>.</p>

                <br/>

                <h4 id="amr-framework-files">AMR Framework Files</h4>

                <p>Drag and drop following files in AMRDemo/AMR/Core folder to your project.</p>
                <div class="file-tree">
                    <ul>
                        <li class="is-folder open">
                            AMRDemo/AMR/Core
                            <ul>
                                <li class="is-file">AMRSDK.framework
                                <li class="is-file">AMRResources.bundle
                                <li class="is-file">KKLog.framework
                            </ul>
                        </li>
                    </ul>
                </div>

                <h4 id="other-frameworks-and-libraries">Other Frameworks and Libraries</h4>
                <p>Add following frameworks and libraries to your project.</p>

                <div class="file-tree">
                    <ul>
                        <li class="is-file">AddressBook.framework 
                        <li class="is-file">AdSupport.framework
                        <li class="is-file">AudioToolbox.framework
                        <li class="is-file">AVFoundation.framework
                        <li class="is-file">AVKit.framework
                        <li class="is-file">CFNetwork.framework
                        <li class="is-file">CoreGraphics.framework
                        <li class="is-file">CoreLocation.framework
                        <li class="is-file">CoreMedia.framework
                        <li class="is-file">CoreMotion.framework
                        <li class="is-file">CoreTelephony.framework
                        <li class="is-file">EventKit.framework
                        <li class="is-file">EventKitUI.framework
                        <li class="is-file">ImageIO.framework
                        <li class="is-file">Foundation.framework
                        <li class="is-file">JavaScriptCore.framework
                        <li class="is-file">libsqlite3.tbd
                        <li class="is-file">libxml2.tbd
                        <li class="is-file">libz.tbd
                        <li class="is-file">MediaPlayer.framework
                        <li class="is-file">MessageUI.framework
                        <li class="is-file">MobileCoreServices.framework
                        <li class="is-file">QuartzCore.framework
                        <li class="is-file">SafariServices.framework
                        <li class="is-file">Social.framework
                        <li class="is-file">StoreKit.framework
                        <li class="is-file">SystemConfiguration.framework
                        <li class="is-file">UIKit.framework
                        <li class="is-file">WatchConnectivity.framework
                        <li class="is-file">WebKit.framework
                    </ul>

                </div>

                <h4 id="mediation-adapters">Mediation Adapters</h4>
                <p>At least one mediation adapter is required for AMRSDK to show banners. You can add all adapters
                    (recommended for maximized revenue) or start with a subset of adapters. Consult your AMR agent for
                    further details.</p>
                <p>Create a folder called Mediation Adapters (name is optonal) and add adapters in AMRDemo/AMR/MediationAdapters folder.</p>

                <div class="file-tree">
                    <ul>
                        <li class="is-folder open">
                            AMRDemo/AMR/MediationAdapters
                            <ul>
                                <li class="is-folder">AMRAdapterAdcolony
                                <li class="is-folder">AMRAdapterAdmob
                                <li class="is-folder">AMRAdapterAdmost
                                <li class="is-folder">AMRAdapterAdtiming
                                <li class="is-folder">AMRAdapterAmazon
                                <li class="is-folder">AMRAdapterApplovin &nbsp;&nbsp;<small>&nbsp;~ iOS9+</small>
                                <li class="is-folder">AMRAdapterAppnext
                                <li class="is-folder">AMRAdapterAppsamurai
                                <li class="is-folder">AMRAdapterChartboost
                                <li class="is-folder">AMRAdapterDFP
                                <li class="is-folder">AMRAdapterFacebook &nbsp;&nbsp;<small>&nbsp;~ iOS9+</small>
                                <li class="is-folder">AMRAdapterFyber
                                <li class="is-folder">AMRAdapterInmobi
                                <li class="is-folder">AMRAdapterInneractive
                                <li class="is-folder">AMRAdapterIronsource
                                <li class="is-folder">AMRAdapterMintegral
                                <li class="is-folder">AMRAdapterMobfox &nbsp;&nbsp;<small>&nbsp;~ iOS9+</small>
                                <li class="is-folder">AMRAdapterMopub
                                <li class="is-folder">AMRAdapterMytarget
                                <li class="is-folder">AMRAdapterNexage
                                <li class="is-folder">AMRAdapterPollfish &nbsp;&nbsp;<small>&nbsp;~ iOS9+</small>
                                <li class="is-folder">AMRAdapterSmaato
                                <li class="is-folder">AMRAdapterStartapp
                                <li class="is-folder">AMRAdapterTapjoy
                                <li class="is-folder">AMRAdapterTapResearch
                                <li class="is-folder">AMRAdapterUnity
                                <li class="is-folder">AMRAdapterVungle
                                <li class="is-folder">AMRAdapterYouappi &nbsp;&nbsp;<small>&nbsp;~ iOS9+</small>
                            </ul>
                        </li>
                    </ul>


                </div>

                <h4 id="xcode-setup">Xcode Setup</h4>
                <p> Add following lines to your <code>plist</code> file.</p>

                <pre><code class="language-markup">&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;
&lt;dict&gt;
  &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;
  &lt;true/&gt;
&lt;/dict&gt;</code></pre>

                <pre><code class="language-markup">&lt;key&gt;NSCalendarsUsageDescription&lt;/key&gt;
&lt;string&gt;Some ad content may access calendar&lt;/string&gt;</code></pre>

                <div class="callout callout-danger" role="alert">
                    <h4></h4>

                    <p><span class="label label-danger">Important</span> If you are using AdMob you must add your AdMob <code>App ID</code> to your <code>plist</code> file with <code>GADApplicationIdentifier</code> key as shown below. <br/>(Replace <code>ca-app-pub-XXXXXXXXXXXXXXXX~XXXXXXXXXX</code> with your own <code>App ID</code>)</p>
						<pre>
<code class="language-markup">
&lt;key&gt;GADApplicationIdentifier&lt;/key&gt;
&lt;string&gt;ca-app-pub-XXXXXXXXXXXXXXXX~XXXXXXXXXX&lt;/string&gt;
</code></pre>

                    <p>Your <code>App ID</code> can be found on AdMob dashboard -> Apps -> App settings -> App info.</p>
                    <p><img class="img-responsive" src="assets/img/admob_appid.png" alt="admob_appid.png"></p>
                </div>

                <div class="callout callout-danger" role="alert">
                   <h4></h4>
                   <p><span class="label label-danger">Important</span> If you are using AppLovin you must add <code>AppLovin SDK Key</code> to your <code>plist</code> file with <code>AppLovinSdkKey</code> key as shown below. <br/>(Replace <code>XXXXXXXXXXXXXXX</code> with your own <code>AppLovin SDK Key</code>)	
	</p>
<pre><code class="language-markup">
&lt;key&gt;AppLovinSdkKey&lt;/key&gt;
&lt;string&gt;XXXXXXXXXXXXXXX&lt;/string&gt;
</code></pre>
                    <p>Your <code>AppLovin SDK Key</code> can be found on AppLovin Dashboard -> Account -> Keys.</p>
 <p><img class="img-responsive" src="assets/img/applovin_sdkkey.png" alt="applovin_sdkkey.png"></p>
                </div>

            </section>

            <section>

                <h2 id="usage">Usage</h2>

                <h3 id="initialization">Initialization</h3>
                <p>
                    To initialize Admost Mediation SDK, import <code>AMRSDK.h</code> to your <code>AppDelegate</code>
                    file;
                </p>

                <pre><code class="language-objectivec">#import &lt;AMRSDK/AMRSDK.h&gt;</code></pre>   

                <p>and initialize AMRSDK with your Application Id in <code>didFinishLaunchingWithOptions</code>
                    callback;
                </p>

                <pre><code class="language-objectivec">
- (BOOL)application:(UIApplication *)application
didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    //GDPR COMPLIANCE
    [AMRSDK setUserConsent:YES];
    [AMRSDK subjectToGDPR:YES];

    [AMRSDK startWithAppId:@&quot;&lt;appId&gt;&quot;];

    return YES;
}
                </code></pre>

                <p>For testing you can use following Application Id;</p>

                <pre><code class="language-markup">
Application Id: @"15066ddc-9c18-492c-8185-bea7e4c7f88c"
                </code></pre>

                <h4 id="initgdpr">GDPR</h4>
                <p> Once you have collected the user’s consent, you can pass it onto the SDK using the init configuration parameters shown above.  </p> 
                 <p><code>setUserConsent</code> has a boolean parameter. If you have the user’s consent, set it YES. If you do not have the user's consent, set it NO.  </p>
                 <p><code>subjectToGDPR</code> has a boolean parameter. If you know the user is subject to GDPR, set it YES. If you know the user is not subject to GDPR, set it NO. </p> 
                <p>If you don’t pass the user’s consent or subjectToGDPR to the SDK, the rules described in  <a href="gdpr.html#gdprrules">GDPR</a>  have been applied.  </p>


                <h3 id="banner-ads">Banner Ads</h3>

                <p>To create and show a banner ad first import <code>AMRSDK.h</code> to your
                    <code>UIViewController</code> file and declare an <code>AMRBanner *mpuBanner</code> property;
                </p>
                <pre><code class="language-objectivec">
// ViewController.h

#import &lt;AMRSDK/AMRSDK.h&gt;

@interface ViewController : UIViewController &lt;AMRBannerDelegate&gt;

@property(nonatomic, strong) AMRBanner *mpuBanner;

@end
                </code></pre>

                <p>Initialize it with your Banner Zone Id and set it's
                    <code>delegate</code> to an object (generally your viewController) which conforms to <code>&lt;AMRBannerDelegate&gt;</code>
                    protocol.
                </p>

                <pre><code class="language-objectivec">
// ViewController.m

mpuBanner = [AMRBanner bannerForZoneId:@&quot;&lt;zoneId&gt;&quot;];
mpuBanner.delegate = self;
                </code></pre>

                <p>For testing you can use following Banner Zone Id; </p>

                <pre><code class="language-markup">
Banner Zone Id: @"b4009772-de04-42c4-bbaa-c18da9e4a1ab"
                </code></pre>

                <p>
                    Optionally you can set the width of the banner, default value is screen width.
                </p>
                <pre><code class="language-objectivec">mpuBanner.bannerWidth = 300;</code></pre>

                <p>Start loading banner with <code>loadBanner</code> method and wait for the
                    <code>&lt;AMRBannerDelegate&gt;</code> protocol callbacks.

                </p>

                <pre><code class="language-objectivec">[mpuBanner loadBanner];</code></pre>

                <p>There are 2 callback methods in <code>&lt;AMRBannerDelegate&gt;</code> protocol.
                    When <code>didReceiveBanner</code> callback method is called just add banner's
                    <code>bannerView</code> as a subview on your viewcontroller to show banner.</p>

                <pre><code class="language-objectivec">- (void)didReceiveBanner:(AMRBanner *)banner {
    [self.view addSubview:banner.bannerView];
}</code></pre>

                <p>If <code>didFailToReceiveBanner</code> callback method is called investigate error to adress the
                    problem.

                </p>

                <pre><code class="language-objectivec">- (void)didFailToReceiveBanner:(AMRBanner *)banner error:(AMRError *)error {
    NSLog(error.errorDescription);
}</code></pre>


                <h3 id="native-ads">Customize Native Ad Appearance (Optional)</h3>

                <p>You can change the appearance of native ads to suit your application's design. If you are integration
                    AMR with Cocoapods, download and extract <a target="_blank" href="http://download.admost.com/CustomXibs.zip">CustomXibs.zip</a> in AMRSDK pod to your project. If you are manually
                    integrating AMR add AMRDemo/Supporting Files/Assets/Natives/ folder to your project.</p>

                <p>You can change the layout and design of following assets; </p>

                <img class="img-responsive " src="assets/img/native_customization.png" alt="shadowed image">

                <p>If you want to use your own layouts you can create a copy and modify one of the custom sized samples (CustomNative150x250.xib, CustomNative200x200.xib or CustomNative300x120.xib) and change their frame to fit your design. </p>

  <img class="img-responsive " src="assets/img/custom_natives.png" alt="shadowed image">

  <p>To use your own custom native xibs you have set the name and size of the custom xib explicitly as follows; </p>

	<pre><code class="language-objectivec">
_bannerCustom200x200 = [AMRBanner bannerForZoneId:@"c72a4a52-23c5-4c34-9eb1-7bbc4c08c7e4"];
_bannerCustom200x200.delegate = self;
_bannerCustom200x200.customNativeSize = CGSizeMake(200, 200);
_bannerCustom200x200.customeNativeXibName = @"CustomNative200x200";
[_bannerCustom200x200 loadBanner];		
</code></pre>

                <h3 id="interstitial-ads">Interstitial Ads</h3>

                <p>To create and show an interstitial ad first import <code>AMRSDK.h</code> to your <code>UIViewController</code>
                    file and declare an <code>AMRInterstitial *fullScreen</code> property;
                </p>

                <pre><code class="language-objectivec">
// ViewController.h

#import &lt;AMRSDK/AMRSDK.h&gt;

@interface ViewController : UIViewController &lt;AMRInterstitialDelegate&gt;

@property(nonatomic, strong) AMRInterstitial *fullScreen;

@end
                </code></pre>

                <p>
                    Initialize it with your Interstitial Zone Id and
                    set it's
                    <code> delegate</code> to an object (generally your viewController) which conforms to
                    <code>&lt;AMRInterstitialDelegate&gt;</code> protocol.
                </p>

                <pre><code class="language-objectivec">
// ViewController.m

fullScreen = [AMRInterstitial interstitialForZoneId:@"&lt;zoneId&gt;"];
fullScreen.delegate = self;
[fullScreen loadInterstitial];
                </code></pre>

                <p>For testing you can use following Interstitial Zone Id;</p>

                <pre><code
                        class="language-markup">Interstitial Zone Id: @"39f74377-5682-436a-9338-9d1c4df410bd"
                </code></pre>

                <p>There are 5 callback methods in <code>&lt;AMRInterstitialDelegate&gt;</code> protocol.
                    When <code>didReceiveInterstitial</code> callback method is called just call the <code>showFromViewController</code>
                    method to present interstitial from a viewController.</p>

                <pre><code class="language-objectivec">- (void)didReceiveInterstitial:(AMRInterstitial *)interstitial {
    [interstitial showFromViewController:self];
}</code></pre>

                <p>If <code>didFailToReceiveInterstitial</code> callback method is called investigate <code>error</code>
                    to adress the problem.
                </p>
                <p>
                    <span class="label label-danger">Important</span> Attempting to load a new interstitial from the
                    <code>didFailToReceiveInterstitial</code>
                    methods is strongly discouraged.
                </p>

                <pre><code class="language-objectivec">- (void)didFailToReceiveInterstitial:(AMRInterstitial *)interstitial error:(AMRError *)error {
    NSLog(error.errorDescription);
}</code></pre>

                <p><code>didShowInterstitial</code> callback method is called to inform the application that the received interstital is shown.</p>
                <pre><code class="language-objectivec">- (void)didShowInterstitial:(AMRInterstitial *)interstitial {}</code></pre>
                
                
                <p><code>didFailToShowInterstitial</code> callback method is called to inform the application that the received interstitial failed to be shown.
                    This delegate expected to be called very rarely but if it is called you should either load another interstitial or resume tasks.
                    </p>
                
                <pre><code class="language-objectivec">- (void)didFailToShowInterstitial:(AMRInterstitial *)interstitial error:(AMRError *)error {}
                </code></pre>
                
                <p><code>didDismissInterstitial</code> callback method is called to inform the application that the
                    interstitial is closed by clicking cross button/back button. You can use this callback to resume paused tasks during
                    interstitial presentation.</p>
                <p>
                    You can use <code>didDismissInterstitial</code> callback and reload a interstitial ad.
                </p>
                <pre><code class="language-objectivec">- (void)didDismissInterstitial:(AMRInterstitial *)interstitial {}</code></pre>

                <h3 id="rewarded-video-ads">Rewarded Video Ads</h3>

                <p>Rewarded video ads' integration is pretty similar to Interstitial ads with 2 additional callbacks. To create and show a rewarded video ad
                    first import
                    <code>AMRSDK.h</code> to your <code>UIViewController</code> file and declare an <code>AMRRewardedVideo *rewardedVideo</code> property;</p>

                <pre><code class="language-objectivec">
// ViewController.h

#import &lt;AMRSDK/AMRSDK.h&gt;

@interface ViewController : UIViewController &lt;AMRRewardedVideoDelegate&gt;

@property(nonatomic, strong) AMRRewardedVideo *rewardedVideo;

@end
                </code></pre>

                <p>
                    Initialize it with your RewardedVideo Zone Id
                    and
                    set it's
                    <code> delegate</code> to an object (generally your viewController) which conforms to
                    <code>&lt;AMRRewardedVideoDelegate&gt;</code> protocol.
                </p>

                <pre><code class="language-objectivec">
// ViewController.m

rewardedVideo = [AMRRewardedVideo rewardedVideoForZoneId:@"&lt;zoneId&gt;"];
rewardedVideo.delegate = self;
[rewardedVideo loadRewardedVideo];
                </code></pre>

                <p>For testing you can use following RewardedVideo Zone Id;</p>

                <pre><code
                        class="language-markup">RewardedVideo Zone Id: @"2bdefd44-5269-4cbc-b93a-373b74a2f067"
                </code></pre>

                <p>There are 6 callback methods in <code>&lt;AMRRewardedVideoDelegate&gt;</code> protocol.
                    <br/><br/>When <code>didReceiveRewardedVideo</code> callback method is called just call the <code>showFromViewController</code>
                    method to present rewarded video from a viewController.</p>

                <pre><code class="language-objectivec">- (void)didReceiveRewardedVideo:(AMRRewardedVideo *)rewardedVideo {
    [rewardedVideo showFromViewController:self];
}
</code></pre>

<p>If <code>didFailToReceiveRewardedVideo</code> callback method is called investigate
    <code>error</code>
    to adress the problem.
</p>
<p>
    <span class="label label-danger">Important</span> Attempting to load a new rewarded video from the
    <code>didFailToReceiveRewardedVideo</code>
    methods is strongly discouraged.
</p>

<pre><code class="language-objectivec">- (void)didFailToReceiveRewardedVideo:(AMRRewardedVideo *)rewardedVideo error:(AMRError *)error {
NSLog(error.errorDescription);
}</code></pre>

<p><code>didShowRewardedVideo</code> callback method is called to inform the application that the received rewarded video is shown.</p>

<pre><code class="language-objectivec">- (void)didShowRewardedVideo:(AMRRewardedVideo *)rewardedVideo {} </code></pre>

<p><code>didFailToShowRewardedVideo</code> callback method is called to inform the application that the received rewarded video failed to be shown.
	This delegate expected to be called very rarely but if it is called you should either load another rewarded video or resume tasks.
	</p>

<pre><code class="language-objectivec">- (void)didFailToShowRewardedVideo:(AMRRewardedVideo *)rewardedVideo error:(AMRError *)error {}
</code></pre>


<p><code>didCompleteRewardedVideo</code> callback method is called to inform the application that the user completed watching the video <b><u>to a certain point</u></b> to get the reward. The video may have finished or keep playing after <code>didCompleteRewardedVideo</code> is called. Use this callback to reward the user.</p>
<p>
    <span class="label label-danger">Important</span> Attempting to load a new rewarded video from the
    <code>didCompleteRewardedVideo</code>
    methods is strongly discouraged.
</p>

<pre><code class="language-objectivec">- (void)didCompleteRewardedVideo:(AMRRewardedVideo *)rewardedVideo {
    [player reward];
}
</code></pre>
                <p><code>didDismissRewardedVideo</code> callback method is called to inform the application that the
                    rewarded video is closed by clicking cross button/back button. You can use this callback to resume paused tasks during
                    rewarded video presentation. <b><u>Always called after didCompleteRewardedVideo delegate callback.</u></b></p>
        <p>
            You can use <code>didDismissRewardedVideo</code> callback and reload a new rewarded video ad.
        </p>

                <pre><code class="language-objectivec">- (void)didDismissRewardedVideo:(AMRRewardedVideo *)rewardedVideo {
    [animation resume];
}
</code></pre>

<h3 id="offerwall-ads">Offerwall Ads</h3>

                <p>To create and show an offerwall ad first import <code>AMRSDK.h</code> to your <code>UIViewController</code>
                    file and declare an <code>AMROfferWall *fullScreen</code> property;
                </p>

                <pre><code class="language-objectivec">
// ViewController.h

#import &lt;AMRSDK/AMRSDK.h&gt;

@interface ViewController : UIViewController &lt;AMROfferWallDelegate&gt;

@property(nonatomic, strong) AMROfferWall *fullScreen;

@end
                </code></pre>

                <p>
                    Initialize it with your Offerwall Zone Id and
                    set it's
                    <code> delegate</code> to an object (generally your viewController) which conforms to
                    <code>&lt;AMROfferWallDelegate&gt;</code> protocol.
                </p>

                <pre><code class="language-objectivec">
// ViewController.m

fullScreen = [AMROfferWall offerWallForZoneId:@"&lt;zoneId&gt;"];
fullScreen.delegate = self;
[fullScreen loadOfferWall];
                </code></pre>

                <p>For testing you can use following Offerwall Zone Id;</p>

                <pre><code
                        class="language-markup">Offerwall Zone Id: @"1cadca08-33f9-4da7-969e-ef116d4e7d0e"
                </code></pre>

                <p>There are 5 callback methods in <code>&lt;AMROfferWallDelegate&gt;</code> protocol.
                    When <code>didReceiveOfferWall</code> callback method is called just call the <code>showFromViewController</code>
                    method to present offerwall from a viewController.</p>

                <pre><code class="language-objectivec">- (void)didReceiveOfferWall:(AMROfferWall *)offerwall {
    [offerwall showFromViewController:self];
}</code></pre>

                <p>If <code>didFailToReceiveOfferWall</code> callback method is called investigate <code>error</code>
                    to adress the problem.
                </p>

                <pre><code class="language-objectivec">- (void)didFailToReceiveOfferWall:(AMROfferWall *)offerwall error:(AMRError *)error {
    NSLog(error.errorDescription);
}</code></pre>

                <p><code>didShowOfferWall</code> callback method is called to inform the application that the received offerwall is presented.</p>
<pre><code class="language-objectivec">- (void)didShowOfferWall:(AMROfferWall *)offerwall {} </code></pre>

                <p><code>didFailToShowOfferWall</code> callback method is called to inform the application that the received offerwall failed to be presented.
	This delegate expected to be called very rarely but if it is called you should either load another offerwall or resume tasks.
	</p>

<pre><code class="language-objectivec">- (void)didFailToShowOfferWall:(AMROfferWall *)offerwall error:(AMRError *)error {}
</code></pre>
                <p><code>didDismissOfferWall</code> callback method is called to inform the application that the
                    offerwall is no longer present. You can use this callback to resume paused tasks during
                    offerwall presentation.</p>
                <pre><code class="language-objectivec">- (void)didDismissOfferWall:(AMROfferWall *)offerwall {} </code></pre>

<h4 id="spend-virtual-currency">Spend Virtual Currency</h4>
            <pre><code class="language-c">
                // Spend Virtual Currency Callbacks - Optional
[AMRSDK setVirtualCurrencyDelegate:self];
[AMRSDK spendVirtualCurrency];
                
- (void)didSpendVirtualCurrency:(NSString *)currency
                         amount:(NSNumber *)amount
                    networkName:(NSString *)networkName {}
            </code></pre>
                <h2 id="extras">Extras</h2>

                <h3 id="dfp">DFP/AdMob Mediation Integration</h3>

                <p>The AMR DFP Adapter lets publishers integrate Admost Mediation Router ads into applications with DFP
                    or AdMob Mediation set as main ad mediation layer.</p>

                <p>In order to show AMR ads in DFP/AdMob Mediation you should first follow dedicated steps of DFP or
                    AdMob Mediation to set AMR as an ad mediation source.</p>

                <p>After adding AMR as an ad mediation source you should define class names for banner and interstitial
                    ad custom events. Enter <code>AMRDFPCustomEventBanner</code> and
                    <code>AMRDFPCustomEventInterstitial</code> class names for
                    banner and interstitial class names respectively. You must pass your AMR zone Id to custom event via
                    Parameter field.</p>

                <img class="img-responsive " src="assets/img/dfp_banner.png" alt="shadowed image">


                <img class="img-responsive " src="assets/img/dfp_interstitial.png" alt="shadowed image">

                <p>Include Admost DFP Adapter in your project after setup, if you are using CocoaPods add following line
                    to ypur podfile and run the following command to install.</p>


                <pre><code class="language-markup">

                pod AMRAdapterDFP

            </code></pre>

                <pre><code class="language-markup">

                $ pod install 

            </code></pre>


                <p>If you are integration Admost manually add <code>AMRAdapterDFP</code> from <code>AMRDemo/AMR/MediationAdapters</code>
                    folder to your project.</p>

                <p>Now you can show AMR banner and interstitial ads via DFP or AdMob Mediation.</p>

                <p>You can check DFP banner and interstitial example in demo project; 
                    AMRDemo/DFPCustomEvents/DFPCustomEventsViewController.m</p>

                <h3 id="testsuite">Test Suite</h3>

                <p>
                	You can use Test Suite to test your ad networks with your zone ids.
                </p>

                <p>
                    <div class="callout callout-danger" role="alert">
                        <p class="text-danger">You must be a Tester to show Test Suite on devices.</p>
                    </div>
                </p>

                <p>
                	To use Test Suite in your application, you can use one of the following codes;
                </p>

                <pre><code class="language-objectivec">
[AMRSDK startTestSuiteWithAppId:&lt;appId&gt;];
                </code></pre>

                <pre><code class="language-objectivec">
[AMRSDK startTestSuiteWithZones:@[&lt;zoneIds&gt;]];
                </code></pre>

                <div class="row"> 
                	<img class="img-responsive col-md-6" src="assets/img/ios_testsuite.png" alt="shadowed image">
                </div>
                
                <h3 id="iap">In App Purchase Tracking</h3>

				<p>
					The following method is used to track purchases with receipt validation:
				</p>

				<pre>
<code class="language-objectivec">
[AMRSDK trackPurchase:&lt;transactionId&gt;
	     currencyCode:&lt;currencyCode&gt;
               amount:&lt;amount&gt;];
					</code>
				</pre>

				<p>Explanation of Parameters:</p>
				<ul>
					<li><b>transactionId</b> – Transaction identifier of SKPaymentTransaction.
					</li>
					<li><b>currencyCode</b> – Currency code of transaction.
					</li>
					<li><b>amount</b> – Amount of transaction.
					</li>
				</ul>

                <p>
                    Example code for in app purchase tracking:
                </p>

                <pre>
<code class="language-objectivec">
SKProduct *product = ...;
NSLocale *priceLocale = product.priceLocale;
NSString *currencyCode = [priceLocale objectForKey:NSLocaleCurrencyCode];

[AMRSDK trackPurchase:transaction.transactionIdentifier
         currencyCode:currencyCode
               amount:[product.price doubleValue]];
                    </code>
                </pre>

                <h3 id="bannercache">Preloading Banners</h3>

                <p>
                    You can use <code>cacheBanner</code> method to cache your banners before showing them.
                </p>

                <p>In order to cache banners use following code;</p>

                <pre><code class="language-objectivec">
AMRBanner* banner = [AMRBanner bannerForZoneId:@&quot;&lt;zoneId&gt;&quot;];
banner.bannerWidth = 320;
[banner cacheBanner];
                </code></pre>

                <h3 id="senduserid">Setting Application User Id </h3>

                <p>
                    You can use the following method to set application specific user id in Admost Analytics for enhanced tracking of your users. You should to call this method before initialization.
                </p>
				
				<pre><code class="language-objectivec">
[AMRSDK setUserId:@&quot;&lt;applicationUserId&gt;&quot;];

                </code></pre>

                <h3 id="sendadjustuserid">Setting Adjust User Id</h3>

                <p>
                    You can use the following method to set Adjust user id in Admost Analytics for enhanced tracking of your users.
                </p>
				
				<pre><code class="language-objectivec">
[AMRSDK setAdjustUserId:@&quot;&lt;adjustUserId&gt;&quot;];

                </code></pre>

                <h3 id="adjustintegration">Adjust Integration <span class="label label-teal">New</span></h3>
                <p>
                    Follow the official <a target="_blank" href="https://github.com/adjust/ios_sdk#basic-integration">ADJUST</a> documents to integrate
                AdjustSDK in to your app.
                </p>
                
                <pre><code class="language-objectivec">

#import &lt;AMRSDK/AMRSDK.h&gt;
#import &lt;AdjustSdk/Adjust.h&gt;

@interface AppDelegate () &lt;AdjustDelegate&gt; @end

- (BOOL)application:(UIApplication *)application
didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    
    [AMRSDK startWithAppId:@&quot;&lt;appId&gt;&quot;];                       
    .
    .
    
    // Adjust Integration
    
    // Replace &lt;yourAdjustAppToken&gt; with your Adjust app token.
    NSString *yourAppToken = @&quot;&lt;yourAdjustAppToken&gt;&quot;

    // Replace environment from ADJEnvironmentSandbox to ADJEnvironmentProduction before publishing.
    NSString *environment = ADJEnvironmentSandbox;
    
    ADJConfig *adjustConfig = [ADJConfig configWithAppToken:yourAppToken
    environment:environment];
    
    [adjustConfig setDelegate:self];
    [Adjust appDidLaunch:adjustConfig];
    .
    .

    return YES;
}

#pragma mark - &lt;AdjustDelegate&gt;

- (void)adjustAttributionChanged:(ADJAttribution *)attribution {

    // Send adid value to Admost
    if (attribution && attribution.adid.length) {
        [AMRSDK setAdjustUserId:attribution.adid];
    }
}
                </code></pre>
                <p><img class="img-shadow img-responsive img-thumbnail center-block" src="assets/img/adjust_config.png" alt="shadowed image"></p>
                <p>
                    <span class="label label-danger">Important</span>
                    Replace environment from <code>&lt;ADJEnvironmentSandbox&gt;</code> to <code>&lt;ADJEnvironmentProduction&gt;</code>
                    before publishing.
                </p>

                <p>
                    <span class="label label-danger">Important</span> 
                    Replace <code>&lt;yourAdjustAppToken&gt;</code> with your own Adjust app token. You can find this in your Adjust <a href="https://www.adjust.com/">dashboard.</a>
                </p>

                <p>Your <code>Adjust app token</code> can be found on Adjust Dashboard -> Apps -> App Detail.</p>
                <p><img class="img-responsive img-shadow" src="assets/img/adjust_app_token.png" alt="adjust_app_token.png"></p>

                <h3 id="sscallbacks">Server to Server Callbacks</h3>

                <p>
                    For rewarded video ads, you can use Server to Server Callbacks for rewarding users after successful completion of video ads. Please consult your business contact person for enabling it and setting required parameters like callback URL, request verification token and method. 
                    <br>
                    To use this feature, only requirement on application side is setting your application user id as described <a href="#senduserid">here</a>. You may also add new custom parameters to the callback URL by setting custom data to the rewarded video object <code>AMRRewardedVideo</code> as shown in the sample code below. This method has to be called before showing ad.
                </p>
				
				<pre><code class="language-objectivec">
rewardedVideo.customData = @{
                            @"ip": @"127.0.0.1",
                            @"os": @"12.0.1"
                            };

                </code></pre>
            </section>
        </article>
        <!-- END Main content -->
    </div>
</main>


<!-- Footer -->
<footer class="site-footer">
    <div class="container">
        <a id="scroll-up" href="#"><i class="fa fa-angle-up"></i></a>

        <div class="row">
            <div class="col-md-6 col-sm-6">
                <p>Copyright &copy; 2017. All right reserved</p>
            </div>
            <div class="col-md-6 col-sm-6">
                <ul class="footer-menu">
                    <li><a href="http://admost.github.io/amrandroid">Android integration</a></li>
                    <li><a href="http://admost.github.io/amrunity">Unity integration</a></li>
                    <li><a href="mailto:amr@admost.com">Contact us</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- END Footer -->

<!-- Scripts -->
<!-- Placed at the end of the document so the pages load faster -->
<script>
    window.jQuery || document.write('<script src="assets/js/vendor/jquery.min.js"><\/script>')
</script>
<script>function copyToClipboard(element) {
    var $temp = $("<input>");
    $("body").append($temp);
    $temp.val($(element).text()).select();
    document.execCommand("copy");
    $temp.remove();
}
</script>

<script src="adnetworks.js" type="text/javascript"></script>
<script src="assets/js/theDocs.all.min.js"></script>
<script src="assets/js/custom.js"></script>

</body>
</html>
